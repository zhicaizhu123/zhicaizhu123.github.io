(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{184:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),a("blockquote",[a("p",[t._v("本文只针对广研Git的的使用规范，不对Git的命令操作做具体介绍，如果想深入使用Git的命令操作可以自行学习。"),a("br"),t._v("\n本文主要针对Git多人协作"),a("br"),t._v("\n本文结合SourceTree一起使用，SourceTree使用可以参看"),a("a",{attrs:{href:"https://zhicaizhu123.github.io/detail/sourcetree/",target:"_blank",rel:"noopener noreferrer"}},[t._v("《SourceTree使用教程》"),a("OutboundLink")],1)])]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),a("p",[t._v("以下操作主要针对通过Git命令行解决冲突，SourceTree解决冲突方案可以参看"),a("a",{attrs:{href:"https://zhicaizhu123.github.io/detail/sourcetree/#%E5%86%B2%E7%AA%81%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E5%BC%8F",target:"_blank",rel:"noopener noreferrer"}},[t._v("SourceTree冲突和解决方式"),a("OutboundLink")],1)]),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),a("p",[t._v("以下操作主要针对通过Git命令行撤销回滚，SourceTree撤销和回滚可以参看"),a("a",{attrs:{href:"https://zhicaizhu123.github.io/detail/sourcetree/#%E7%89%88%E6%9C%AC%E5%9B%9E%E9%80%80",target:"_blank",rel:"noopener noreferrer"}},[t._v("SourceTree版本回退"),a("OutboundLink")],1)]),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),a("p",[t._v("以下操作主要针对通过Git命令行撤销回滚，SourceTree撤销和回滚可以参看"),a("a",{attrs:{href:"https://zhicaizhu123.github.io/detail/sourcetree/#%E5%BC%80%E5%8F%91%E4%B8%AD%E7%AA%81%E5%8F%91%E7%B4%A7%E6%80%A5%E4%BB%BB%E5%8A%A1%E5%A4%84%E7%90%86",target:"_blank",rel:"noopener noreferrer"}},[t._v("SourceTree开发中突发紧急任务处理"),a("OutboundLink")],1)]),t._v(" "),t._m(19),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),a("p",[t._v("在软件团队中，有一个不成文的习惯，团队成员在每天晚上下班前，先将一天工作内容推送到远程仓库，早上上班时先从中央仓库拉取项目更新。由于项目的每个成员都可以通过版本历史记录查看其它成员的工作内容和项目进展，因此也就形成了团队内部工作透明的机制。")]),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"git-使用规范"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#git-使用规范","aria-hidden":"true"}},[this._v("#")]),this._v(" Git 使用规范")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"代码发布流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代码发布流程","aria-hidden":"true"}},[this._v("#")]),this._v(" 代码发布流程")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("发布开发及测试环境\n"),a("ul",[a("li",[t._v("将需求代码合并到对应环境分支中，并提交到远端")]),t._v(" "),a("li",[t._v("发布开发环境，则登录http://tzdtz.com:8080/")]),t._v(" "),a("li",[t._v("发布测试环境，则登录http://jenkins.tzdtz.com/ （"),a("a",{attrs:{href:""}},[t._v("jenkins使用教程")]),t._v("）")]),t._v(" "),a("li",[t._v("选择对应项目进行发布")]),t._v(" "),a("li",[t._v("jenkins将自动拉取git中对应分支的代码进行发布")])])]),t._v(" "),a("li",[t._v("发布预发布环境（多人协作）及正式环境\n"),a("ul",[a("li",[t._v("将需求代码合并到对应环境分支中，并提交到远端")]),t._v(" "),a("li",[t._v('打版本tag，并以"prefix_YYYY-MM-DD_version_X.X_index"格式命名，如"pre_2018-07-12_version_1.0_1"（如果当天同一版本多次发布数，index依次递增，那么tag命名依次为"pre_2018-07-12_version_1.0_1"，"pre_2018-07-12_version_1.0_2"， "pre_2018-07-12_version_1.0_3"， ...）')]),t._v(" "),a("li",[t._v("将tag提交到远程")]),t._v(" "),a("li",[t._v("登录http://jenkins.tzdtz.com/ （"),a("a",{attrs:{href:""}},[t._v("jenkins使用教程")]),t._v("）")]),t._v(" "),a("li",[t._v("找到对应项目，选择想要发布的tag进行发布")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"分支说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分支说明","aria-hidden":"true"}},[this._v("#")]),this._v(" 分支说明")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("code",[t._v("master")]),t._v(" 生产环境分支：")]),t._v(" "),a("li",[a("code",[t._v("fixbug")]),t._v(" 生产环境紧急bug处理分支："),a("br"),t._v("\n这个分支用来做生产环境bug紧急修复，它来自"),a("code",[t._v("master")]),t._v("分支；"),a("br"),t._v('\nfixbug分支命名规则："YYYY-MM-DD_fixbug_bugname"，如： "2018-10-01_fixbug_arrange_course"。')]),t._v(" "),a("li",[a("code",[t._v("pre")]),t._v(" 预发布环境分支（多人协作）")]),t._v(" "),a("li",[a("code",[t._v("test")]),t._v(" 测试环境分支")]),t._v(" "),a("li",[a("code",[t._v("dev")]),t._v(" 开发环境分支")]),t._v(" "),a("li",[a("code",[t._v("feature")]),t._v(" 功能分支："),a("br"),t._v('\nfeature分支命名规则: "YYYY-MM-DD_version_X.X"，如："2018-10-01_version_2.3"。')])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("注意：")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("code",[t._v("master")]),t._v("，"),a("code",[t._v("pre")]),t._v(", "),a("code",[t._v("test")]),t._v("， "),a("code",[t._v("dev")]),t._v("只能从feature和fixbug分支合并")]),t._v(" "),a("li",[t._v("切勿在"),a("code",[t._v("master")]),t._v("， "),a("code",[t._v("pre")]),t._v("， "),a("code",[t._v("test")]),t._v("， "),a("code",[t._v("dev")]),t._v("分支直接修改代码，修改代码需要在feature或fixbug分支修改")]),t._v(" "),a("li",[t._v("环境分支只能被合并，即添加新代码，不能合并到其他分支，即不可迁出代码，防止代码污染")]),t._v(" "),a("li",[t._v("需求上线后，将代码合并到"),a("code",[t._v("master")]),t._v("分支，并删除远端和本地端的新建的feature分支和fixbug分支")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"feature分支和fixbug分支及tag命名规范"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#feature分支和fixbug分支及tag命名规范","aria-hidden":"true"}},[this._v("#")]),this._v(" feature分支和fixbug分支及tag命名规范")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v('feature分支命名规则："YYYY-MM-DD_version_X.X"，如："2018-10-01_version_2.3"。')]),this._v(" "),s("li",[this._v('fixbug分支命名规则："YYYY-MM-DD_fixbug_bugname"，如： "2018-10-01_fixbug_arrange_course"。')]),this._v(" "),s("li",[this._v('tag 命名规则： "prefix_YYYY-MM-DD_version_X.X_index"，如： "prod_2018-07-12_version_1.0_1"。prefix可能为prod(生产环境)、pre(预发布环境)、fixbug(紧急bug修复)')])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"开发流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开发流程","aria-hidden":"true"}},[this._v("#")]),this._v(" 开发流程")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",[a("li",[a("p",[t._v("切换到"),a("code",[t._v("master")]),t._v("主干，拉取最新代码")]),t._v(" "),a("ul",[a("li",[t._v("命令行：")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" pull origin master\n")])])]),a("ul",[a("li",[t._v("SourceTree：")])]),t._v(" "),a("p",[a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e7eb6a8f93195?w=903&h=477&f=png&s=78470"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e7eb6a8f93195?w=903&h=477&f=png&s=78470",alt:""}})])])]),t._v(" "),a("li",[a("p",[t._v("从master拉取创建feature分支")]),t._v(" "),a("ul",[a("li",[t._v("命令行：")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("// 例如当前需要开发crm2.3版本\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout -b 2018-10-01_version2.3\n\n// 开发完成后提交到历史版本\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" add "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(".")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'提交信息说明'")]),t._v("\n")])])]),a("ul",[a("li",[t._v("SourceTree："),a("br"),t._v("\n创建并切换到功能分支"),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e7ef26e828e5d?w=1352&h=412&f=png&s=121460"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e7ef26e828e5d?w=1352&h=412&f=png&s=121460",alt:""}})]),a("br"),t._v("\n开发完成后提交到历史版本"),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e7f676b50d620?w=1234&h=396&f=png&s=100036"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e7f676b50d620?w=1234&h=396&f=png&s=100036",alt:""}})]),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e7f8d1993031e?w=1352&h=672&f=png&s=82698"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e7f8d1993031e?w=1352&h=672&f=png&s=82698",alt:""}})])])])]),t._v(" "),a("li",[a("p",[t._v("开发完功能后，合并到开发环境， 合并完后记得切换回个人分支，预防直接修改"),a("code",[t._v("dev")]),t._v("分支代码")]),t._v(" "),a("ul",[a("li",[t._v("命令行：")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("// 切换到dev开发环境\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout dev\n\n// 拉取最新的dev分支代码\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" pull origin dev\n\n// 合并2018-10-01_version_2.3分支到开发环境， 如果在合并过程中出现冲突，需要解决提交才进行下一步操作\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" merge --no-ff 2018-10-01_version_2.3\n\n\n// 提交到远程dev\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin dev\n\n// 切换回2018-10-01_version_2.3分支\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout 2018-10-01_version_2.3\n")])])]),a("ul",[a("li",[t._v("SourceTree："),a("br"),t._v("\n切换到dev分支，获取远程最新代码"),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e7f2dc5f1a861?w=1157&h=458&f=png&s=110597"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e7f2dc5f1a861?w=1157&h=458&f=png&s=110597",alt:""}})]),a("br"),t._v("\n合并功能分支代码到dev分支"),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e7fd8825da4c5?w=1343&h=389&f=png&s=123520"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e7fd8825da4c5?w=1343&h=389&f=png&s=123520",alt:""}})]),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e8001ac557f80?w=1346&h=685&f=png&s=160175"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e8001ac557f80?w=1346&h=685&f=png&s=160175",alt:""}})]),a("br"),t._v("\n如果合并过程中发生冲突，需要解决提交后才进行下一步操作，"),a("a",{attrs:{href:"#%E8%A7%A3%E5%86%B3%E5%86%B2%E7%AA%81"}},[t._v("冲突解决方案")]),a("br"),t._v("\n推送dev到远程库"),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e804c475310a0?w=1350&h=415&f=png&s=127402"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e804c475310a0?w=1350&h=415&f=png&s=127402",alt:""}})])])])]),t._v(" "),a("li",[a("p",[t._v("开发环境联调测试没有问题后，提交到测试环境，合并完后记得切换回个人分支，预防直接修改"),a("code",[t._v("test")]),t._v("分支代码(测试人员介入测试)")]),t._v(" "),a("ul",[a("li",[t._v("命令行：")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("// 切换到test测试环境\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),t._v("\n\n// 拉取最新的test分支代码\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" pull origin "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),t._v("\n\n// 合并2018-10-01_version_2.3分支到开发环境\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" merge --no-ff 2018-10-01_version_2.3\n\n// 提交到远程dev\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),t._v("\n\n// 切换回2018-10-01_version_2.3分支\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout 2018-10-01_version_2.3\n")])])]),a("ul",[a("li",[t._v("SourceTree："),a("br"),t._v("\n切换到test分支，获取远程最新代码"),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e8090831f904c?w=1343&h=494&f=png&s=152238"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e8090831f904c?w=1343&h=494&f=png&s=152238",alt:""}})]),a("br"),t._v("\n合并功能分支到test分支"),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e80ad802a843b?w=1358&h=388&f=png&s=120936"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e80ad802a843b?w=1358&h=388&f=png&s=120936",alt:""}})]),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e80c99425348d?w=1351&h=689&f=png&s=163342"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e80c99425348d?w=1351&h=689&f=png&s=163342",alt:""}})]),a("br"),t._v("\n如果合并过程中发生冲突，需要解决提交后才进行下一步操作，"),a("a",{attrs:{href:"#%E8%A7%A3%E5%86%B3%E5%86%B2%E7%AA%81"}},[t._v("冲突解决方案")]),a("br"),t._v("\n推送test到远程库"),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e80f6dba8d68e?w=1403&h=401&f=png&s=128212"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e80f6dba8d68e?w=1403&h=401&f=png&s=128212",alt:""}})])])])]),t._v(" "),a("li",[a("p",[t._v("测试环境测试人员确定没有问题，可以上pre预发布环境，合并完后记得切换回个人分支，预防直接修改"),a("code",[t._v("pre")]),t._v("分支代码(测试人员介入测试)")]),t._v(" "),a("ul",[a("li",[t._v("命令行：")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("// 切换到pre测试环境\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout pre\n\n// 拉取最新的pre分支代码\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" pull origin pre\n\n// 合并2018-10-01_version_2.3分支到开发环境\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" merge --no-ff 2018-10-01_version_2.3\n\n// 提交到远程pre\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin pre\n\n// 打版本tag，提交到远程库"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tag名称规则：打tag日期+功能版本+索引值"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" tag pre_2018-10-01_version_2.3_1 -m "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'crm v2.3相关功能开发'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin pre_2018-10-01_version_2.3_1\n\n// 切换回2018-10-01_crm_version_2.3分支\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout 2018-10-01_version_2.3\n")])])]),a("ul",[a("li",[t._v("SourceTree："),a("br"),t._v("\n可以参看上面将功能分支到dev和test分支流程，不过这个步骤添加了打版本tag环节"),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e81742581c114?w=1349&h=493&f=png&s=143454"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e81742581c114?w=1349&h=493&f=png&s=143454",alt:""}})]),a("br"),t._v("\n如果需要将tag推送到远程库可以执行以下操作"),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e818c8c28acc5?w=1357&h=638&f=png&s=171229"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e818c8c28acc5?w=1357&h=638&f=png&s=171229",alt:""}})])])])]),t._v(" "),a("li",[a("p",[t._v("预发布测试没有问题而且接收到测试人员的上线通知邮件，提交到生产环境")]),t._v(" "),a("ul",[a("li",[t._v("命令行：")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("// 切换到pre测试环境\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout master\n\n// 拉取最新的pre分支代码\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" pull origin master\n\n// 合并20181001-crm-2.3分支到开发环境\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" merge --no-ff 2018-10-01_version_2.3\n\n// 提交到远程master\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin master\n\n// 打tag，提交到远程库"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tag名称规则：打tag日期+功能版本+索引值"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" tag prod_2018-10-01_version_2.3_1 -m "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'crm v2.3相关功能开发'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin prod_2018-10-01_version_2.3_1\n\n// 切换回20181001-crm-2.3分支\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout 2018-10-01_version_2.3_1\n")])])]),a("ul",[a("li",[t._v("SourceTree："),a("br"),t._v("\n可以参看上面将功能分支到pre分支流程"),a("br")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"解决冲突"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决冲突","aria-hidden":"true"}},[this._v("#")]),this._v(" 解决冲突")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("p",[t._v("场景一：两个或多个开发人员修改了同一行代码，"),a("code",[t._v("git merge")]),t._v("合并出现错误如图所示"),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/20/167ca71b2cff20fe?w=567&h=58&f=png&s=6627"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/20/167ca71b2cff20fe?w=567&h=58&f=png&s=6627",alt:""}})]),a("br"),t._v("\n解决办法："),a("br"),t._v("\n与相关的小伙伴协商修改，处理后"),a("code",[t._v("git add")]),t._v("，"),a("code",[t._v("git commit")]),t._v(", "),a("code",[t._v("git push")])])]),t._v(" "),a("li",[a("p",[t._v("场景二："),a("code",[t._v("git push")]),t._v(" 推送代码到远程库时，远程库最新提交和你试图推送的提交有冲突，其实这个也是相当于把本地库合并到远程库的操作，错误信息如图所示"),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/20/167ca77274629671?w=573&h=136&f=png&s=17070"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/20/167ca77274629671?w=573&h=136&f=png&s=17070",alt:""}})]),a("br"),t._v("\n解决办法："),a("br"),t._v("\n先使用"),a("code",[t._v("git pull origin branch_name")]),t._v("（git fetch + git merge）         把最新的代码拉取下来（先获取后合并，所以出现的错误信息和"),a("code",[t._v("git merge")]),t._v(" 的一样），解决冲突"),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/20/167ca7aec0119105?w=564&h=177&f=png&s=18904"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/20/167ca7aec0119105?w=564&h=177&f=png&s=18904",alt:""}})]),a("br"),t._v("\n处理后使用"),a("code",[t._v("git add")]),t._v(", "),a("code",[t._v("git commit")]),t._v(", "),a("code",[t._v("git push")]),t._v("再次推送")])]),t._v(" "),a("li",[a("p",[t._v("场景三： 树冲突，文件删除或者重命名，有一个file.js文件，小伙伴A把文件改名为fileA.js，小伙伴B把同一个文件改名为fileB.js，那么小伙伴B将这两个commit合并时，会产生冲突，错误如图所示"),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/20/167ca875175acd0c?w=570&h=122&f=png&s=17032"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/20/167ca875175acd0c?w=570&h=122&f=png&s=17032",alt:""}})]),a("br"),t._v("\n解决办法： 与小伙伴协商取舍，假如最终确定使用小伙伴B的文件名")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除fileA.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -r fileA.js\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除file.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -r file.js\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将fileB.js加入到暂存区")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" add fileB.js\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 提交")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'说明'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 推送")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin branch_name\n    ```\n\n")])])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"减少代码冲突的措施"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#减少代码冲突的措施","aria-hidden":"true"}},[this._v("#")]),this._v(" 减少代码冲突的措施")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("容易产生冲突的操作方式\n"),a("ul",[a("li",[t._v("在环境分支（"),a("code",[t._v("master")]),t._v(", "),a("code",[t._v("pre")]),t._v(", "),a("code",[t._v("test")]),t._v(", "),a("code",[t._v("dev")]),t._v("）直接修改代码")]),t._v(" "),a("li",[t._v("多个人同时操作了同一个文件")]),t._v(" "),a("li",[t._v("一个人很长时间没有提交代码")]),t._v(" "),a("li",[t._v("修改之前没有更新最新代码")]),t._v(" "),a("li",[t._v("擅自修改其它小伙伴的代码")])])]),t._v(" "),a("li",[t._v("减少冲突的操作方式\n"),a("ul",[a("li",[t._v("避免在环境分支（"),a("code",[t._v("master")]),t._v(", "),a("code",[t._v("pre")]),t._v(", "),a("code",[t._v("test")]),t._v(", "),a("code",[t._v("dev")]),t._v("）修改代码")]),t._v(" "),a("li",[t._v("先pull再修改，修改完需要提交add, commit, pull, push")]),t._v(" "),a("li",[t._v("确保自己正在修改的文件是最新版本")]),t._v(" "),a("li",[t._v("各自开发各自的功能模块")]),t._v(" "),a("li",[t._v("下班前提交代码，上班时拉取最新代码")]),t._v(" "),a("li",[t._v("不要擅自修改其它小伙伴的代码")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"撤销和回滚"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#撤销和回滚","aria-hidden":"true"}},[this._v("#")]),this._v(" 撤销和回滚")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("本地仓库：\n"),a("ul",[a("li",[a("p",[t._v("场景一：文件被修改了，但未执行"),a("code",[t._v("git add")]),t._v("操作（未暂存）")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 撤销单个文件修改")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 撤销全部文件修改")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(".")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("场景二：同时对多个文件执行了"),a("code",[t._v("git add")]),t._v("操作，但本次只想提交其中一部分文件（已暂存）")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 取消单个文件暂存")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reset HEAD "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 取消全部文件暂存")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reset HEAD "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(".")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("场景三：文件执行了"),a("code",[t._v("git add")]),t._v("操作，但想撤销对其的修改")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# 取消暂存\ngit reset HEAD <filename>\n# 撤销修改\ngit checkout <filename>\n")])])])]),t._v(" "),a("li",[a("p",[t._v("场景四：修改的文件已被"),a("code",[t._v("commit")]),t._v("，但想再次修改不再产生新的commit")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改最后一次提交 ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" add "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit --amend -m "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"描述说明"')]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("场景五：已在本地进行了多次"),a("code",[t._v("git commit")]),t._v("操作，现在想撤销到其中某次commit")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reset "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("--hard"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("soft"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("mixed"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("merge"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("keep"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("commit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("HEAD"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("p",[t._v("--hard：重设暂存区和工作区，从commit以来在工作区中的任何改变都被丢弃，并把HEAD指向commit，彻底回退到某个版本，本地的源码也会变为上一个版本的内容（三思而后行）"),a("br"),t._v("\n--soft： 暂存区和工作区中的内容不作任何改变，仅仅把HEAD指向commit，退到某个版本，只回退了commit的信息。如果还要提交，直接commit即可"),a("br"),t._v("\n--mixed：仅重设暂存区，但是不重设工作区。这个模式是默认模式。回退到某个版本，只保留源码，回退commit和add信息"),a("br"),t._v("\nreset常用示例")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("回退add操作")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 撤销暂存区，不改变工作区")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reset HEAD "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reset HEAD "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(".")]),t._v("\n")])])]),a("p",[t._v("说明：可以将文件从“已暂存”状态（Index区）回滚到初始状态。")])]),t._v(" "),a("li",[a("p",[t._v("回退最后指定版本的提交")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 回退最后一次提交")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# hard方式")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reset --hard "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("commitId"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("HEAD"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# soft方式")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reset --soft "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("commitId"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("HEAD"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mixed方式")]),t._v("\nget reset "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("commitId"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("HEAD"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])])])])])]),t._v(" "),a("li",[t._v("远程仓库：\n注意：对远程仓库做回滚操作是有风险的，需提前做好备份和通知其他小伙伴！\n"),a("ul",[a("li",[a("p",[t._v("通过tag回滚。"),a("br"),t._v("\n如果你每次更新线上，都会打版本tag，你可以很快的处理这种的情况（所以这是为什么生产环境和预发布环境都要打版本tag），直接在jenkins上指定发布需要发布的tag")])]),t._v(" "),a("li",[a("p",[t._v("回滚到指定版本（不是迫不得已不要使用"),a("code",[t._v("git reset")]),t._v(" 回滚远程库版本）")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" revert "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("commitId"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("HEAD"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("originBranchname"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[a("code",[t._v("git reset")]),t._v(" 和 "),a("code",[t._v("get revert")]),t._v("的区别：")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("git revert")]),t._v("是用一次新的commit来回滚之前的commit，"),a("code",[t._v("git reset")]),t._v("是直接删除指定的commit")]),t._v(" "),a("li",[t._v("在回滚这一操作上看，效果差不多。但是在日后继续merge以前的老版本时有区别。因为"),a("code",[t._v("git revert")]),t._v("是用一次逆向的commit“中和”之前的提交，因此日后合并老的branch时，导致这部分改变不会再次出现，但是"),a("code",[t._v("git reset")]),t._v("是之间把某些commit在某个branch上删除，因而和老的branch再次merge时，这些被回滚的commit应该还会被引入。")]),t._v(" "),a("li",[a("code",[t._v("git reset")]),t._v(" 是把HEAD向后移动了一下，而git revert是HEAD继续前进，只是新的commit的内容和要revert的内容正好相反，能够抵消要被revert的内容。")])])])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"开发中突发紧急任务处理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开发中突发紧急任务处理","aria-hidden":"true"}},[this._v("#")]),this._v(" 开发中突发紧急任务处理")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("经常有这样的事情发生，当你正在进行项目中某一部分的工作，里面的东西处于一个比较杂乱的状态，而你想转到其他分支上进行一些工作。问题是，你不想提交进行了一半的工作，否则以后你无法回到这个工作点。解决这个问题的办法就是"),s("code",[this._v("git stash")]),this._v("命令。"),s("br"),this._v("\n“贮藏”可以获取你工作目录的中间状态——也就是你修改过的被追踪的文件和暂存的变更——并将它保存到一个未完结变更的堆栈中，随时可以重新应用。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 贮藏当前工作点")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" stash\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 应用最近一次的贮藏")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" stash apply\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看现有的贮藏")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" stash list\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# stash@{0}: WIP on master: 049d078 added the index file")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# stash@{1}: WIP on master: c264051 Revert "added file_size"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# stash@{2}: WIP on master: 21d80a5 added number to log")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 应用更早的贮藏")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" stash apply stash@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除贮藏")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" stash drop stash@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 应用最近一次贮藏同是删除这一次的贮藏")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" stash pop\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"保留分支及tag规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#保留分支及tag规则","aria-hidden":"true"}},[this._v("#")]),this._v(" 保留分支及tag规则")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("保留分支的规则（完成开发后删除相关的feature分支）："),a("br"),t._v("\n除了环境分支（"),a("code",[t._v("master")]),t._v(", "),a("code",[t._v("pre")]),t._v(", "),a("code",[t._v("test")]),t._v(", "),a("code",[t._v("dev")]),t._v("）其它feture分支，如果开发完已经上线确保没有问题后了，应该把它删除。")]),t._v(" "),a("li",[t._v("保留tag规则(建议保留2个大版本)："),a("br"),t._v("\n我们自己采用gitlab来搭建自己的中央版本库，如果中央版本库tag数量会变得非常多，当tag多了以后，整个网站都呈现出不是特别正常的样子，所以，就需要保持较少的tag列表，让网站保持比较高的性能。所以建议tag保留规则应该是只保留两个大版本，其它在这两个版本的tag可以删除，录入又version_1.x.x, version_2.x.x, version_3.x.x三个大版本的tag，我们只保留最新的两个大版本tag version_2.x.x, version_3.x.x，删除tag version_1.x.x\n"),a("ul",[a("li",[a("p",[t._v("删除远程库的tag")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 首先就是找到远程库要删除的tags列表")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" show-ref --tag\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除远程库tag")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin :"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("tag"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 批量删除符合条件远程库tags，例如删除pre预发布环境版本打得version_1.x.x的tag，其它环境的tag以此类推")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" show-ref --tag "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("awk")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'/pre_\\S*_version_1(\\.[0-9]){0,}_\\d+$/ {print ":" '),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$2")]),t._v("}'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("xargs")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin\n")])])])]),t._v(" "),a("li",[a("p",[t._v("删除本地库的tag")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 产看本地库tags列表")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" tag\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除本地库tag")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" tag -d "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("tag"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 批量删除符合条件的本地库tags，例如删除pre预发布环境版本打得version_1.x.x的tag，其它环境的tag以此类推")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" tag -l"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("awk")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/pre_\\S*_version_1(\\.[0-9]){0,}_\\d+$/ {print  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),t._v("}'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("xargs")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" tag -d\n")])])])])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"每天开发前先拉取，每天下班前先上传到中央仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#每天开发前先拉取，每天下班前先上传到中央仓库","aria-hidden":"true"}},[this._v("#")]),this._v(" 每天开发前先拉取，每天下班前先上传到中央仓库")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("p",[t._v("开发前拉取"),a("br"),t._v("\n命令行：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" pull origin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("branch_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("SourceTree："),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e82cc236285f2?w=1365&h=409&f=png&s=127620"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e82cc236285f2?w=1365&h=409&f=png&s=127620",alt:""}})])])]),t._v(" "),a("li",[a("p",[t._v("下班前推送到远程库"),a("br"),t._v("\n命令行：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" add "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(".")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'描述说明'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("branch_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("SourceTree："),a("br"),t._v("\n确定修改已经提交到历史库，然后推送到远程分支"),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e82d0c4a5431d?w=1358&h=378&f=png&s=117646"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e82d0c4a5431d?w=1358&h=378&f=png&s=117646",alt:""}})])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"错误提交-合并-推送的挽救方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#错误提交-合并-推送的挽救方法","aria-hidden":"true"}},[this._v("#")]),this._v(" 错误提交/合并/推送的挽救方法")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("场景一： 未将修改内容提交到错误的分支\n"),a("ul",[a("li",[a("p",[t._v("命令行：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将修改的代码暂存到stash")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" stash\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 切换到正确的分支")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("target_branch_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 从stash中取出暂存的代码修改")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" stash pop\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 提交修改")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" add "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(".")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'提交信息说明'")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("SourceTree："),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e8640a2c02117?w=1349&h=385&f=png&s=132715"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e8640a2c02117?w=1349&h=385&f=png&s=132715",alt:""}})]),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e8664c2712bfd?w=1360&h=653&f=png&s=188496"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e8664c2712bfd?w=1360&h=653&f=png&s=188496",alt:""}})]),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e86fcbe520cb8?w=1357&h=446&f=png&s=135996"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e86fcbe520cb8?w=1357&h=446&f=png&s=135996",alt:""}})])])])])]),t._v(" "),a("li",[t._v("场景二： 已将修改内容提交/合并到错误分支， 但未提交到远程库\n"),a("ul",[a("li",[t._v("命令行："),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 撤销回退修改( 混合合并：仅重设暂存区，但是不重设工作区。这个模式是默认模式。回退到某个版本，只保留源码，回退commit和add信息 )")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reset "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("commitId"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将修改的代码暂存到stash")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" stash\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 切换到正确的分支")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("target_branch_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 从stash中取出暂存的代码修改")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" stash pop\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 提交修改")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" add "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(".")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'提交信息说明'")]),t._v("\n")])])])]),t._v(" "),a("li",[t._v("SourceTree："),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e86ad291cc2b4?w=1356&h=586&f=png&s=180730"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e86ad291cc2b4?w=1356&h=586&f=png&s=180730",alt:""}})]),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e86b696f57289?w=1348&h=321&f=png&s=112959"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e86b696f57289?w=1348&h=321&f=png&s=112959",alt:""}})]),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e86c2d6c68e3b?w=1351&h=391&f=png&s=124746"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e86c2d6c68e3b?w=1351&h=391&f=png&s=124746",alt:""}})]),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e86e451dce867?w=1366&h=642&f=png&s=189469"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e86e451dce867?w=1366&h=642&f=png&s=189469",alt:""}})]),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e86fe2f81c26d?w=1357&h=446&f=png&s=135996"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e86fe2f81c26d?w=1357&h=446&f=png&s=135996",alt:""}})])])])]),t._v(" "),a("li",[t._v("场景三： 已经修改的内容提交到错误分支的远程库\n"),a("ul",[a("li",[t._v("命令行："),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 新建一个临时分支保存当前修改状态")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout -b "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("temp_branch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 撤销回退修改")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reset "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("commitId"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将修改的代码暂存到stash")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" stash\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 切换回错误分支")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout -b "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("src_branch_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 撤销回退修改")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" revert "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("commitId"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 推送到到远程库")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("branch_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 切换到正确的分支")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("target_branch_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 从stash中取出暂存的代码修改")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" stash pop\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 合并成功后推送到远程库")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("target_branch_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 合并成功后删除临时分支")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" branch -d "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("temp_branch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])]),t._v(" "),a("li",[t._v("SourceTree："),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e8737316043ae?w=1352&h=434&f=png&s=72886"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e8737316043ae?w=1352&h=434&f=png&s=72886",alt:""}})]),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e884a3acf9d2a?w=1348&h=475&f=png&s=159258"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e884a3acf9d2a?w=1348&h=475&f=png&s=159258",alt:""}})]),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e884fcd95d1e6?w=1356&h=347&f=png&s=120585"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e884fcd95d1e6?w=1356&h=347&f=png&s=120585",alt:""}})]),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e885ad099bc12?w=1352&h=414&f=png&s=131588"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e885ad099bc12?w=1352&h=414&f=png&s=131588",alt:""}})]),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e874ee501aa4f?w=1349&h=568&f=png&s=176968"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e874ee501aa4f?w=1349&h=568&f=png&s=176968",alt:""}})]),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e8882fa1c31c5?w=1357&h=681&f=png&s=193366"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e8882fa1c31c5?w=1357&h=681&f=png&s=193366",alt:""}})]),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e888e7d22a9f8?w=1360&h=506&f=png&s=146960"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e888e7d22a9f8?w=1360&h=506&f=png&s=146960",alt:""}})]),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e889a5ff98c08?w=1360&h=506&f=png&s=146960"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e889a5ff98c08?w=1360&h=506&f=png&s=146960",alt:""}})]),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://user-gold-cdn.xitu.io/2018/12/26/167e88a22eb7c0fd?w=1338&h=703&f=png&s=186601"}},[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/12/26/167e88a22eb7c0fd?w=1338&h=703&f=png&s=186601",alt:""}})])])])])])}],!1,null,null,null);n.options.__file="README.md";s.default=n.exports}}]);